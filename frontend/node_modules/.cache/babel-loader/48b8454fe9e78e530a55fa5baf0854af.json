{"ast":null,"code":"var _jsxFileName = \"/home/dev-nando/Desktop/Teste Creathus/creathus/src/pages/main/index.js\";\nimport React, { Component } from 'react';\nimport api from '../../services/api';\nimport { Link } from 'react-router-dom';\nimport './styles.css';\nexport default class Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      details: [],\n      detailsInfo: {},\n      page: 1\n    };\n\n    this.prevPage = () => {\n      const {\n        page\n      } = this.state;\n      if (page === 1) return;\n      const pageNumber = page - 1;\n      this.loadProducts(pageNumber);\n    };\n\n    this.nextPage = () => {\n      const {\n        page,\n        detailsInfo\n      } = this.state;\n      if (page === detailsInfo.pages) return; //.pages eh o limite de paginas\n\n      const pageNumber = page + 1;\n      this.loadProducts(pageNumber);\n    };\n\n    this.createProduct = async () => {\n      const response = await api.post('/products', {\n        title: 'oi',\n        description: 'oi',\n        url: 'www'\n      });\n    };\n\n    this.loadProducts = async (page = 1) => {\n      const response = await api.get(`/products?page=${page}`);\n      console.log(response.data);\n      const {\n        docs,\n        ...detailsInfo\n      } = response.data;\n      this.setState({\n        products: docs,\n        detailsInfo,\n        page\n      });\n    };\n  }\n\n  //exec assim que o componente e mostrado\n  componentDidMount() {\n    this.loadProducts();\n  }\n\n  render() {\n    const {\n      details,\n      detailInfo,\n      page\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"details-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, details.map(detail => /*#__PURE__*/React.createElement(\"article\", {\n      key: detail._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 25\n      }\n    }, detail.title), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 25\n      }\n    }, detail.description), /*#__PURE__*/React.createElement(Link, {\n      to: `products/${details._id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 25\n      }\n    }, \"Acessar\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"actions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      disabled: page === 1,\n      onClick: this.prevPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, \"Back\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.createDetails,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }, \"Add\"), /*#__PURE__*/React.createElement(\"button\", {\n      disabled: page === detailsInfo.pages,\n      onClick: this.nextPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, \"Next\")));\n  }\n\n}","map":{"version":3,"sources":["/home/dev-nando/Desktop/Teste Creathus/creathus/src/pages/main/index.js"],"names":["React","Component","api","Link","Main","state","details","detailsInfo","page","prevPage","pageNumber","loadProducts","nextPage","pages","createProduct","response","post","title","description","url","get","console","log","data","docs","setState","products","componentDidMount","render","detailInfo","map","detail","_id","createDetails"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport api from '../../services/api'\nimport { Link } from 'react-router-dom'\n\nimport './styles.css'\n\nexport default class Main extends Component {\n   //variaveis de estado que ouve alteracoes\n    state = {\n       details: [],\n       detailsInfo: {},\n       page: 1\n   }\n\n    //exec assim que o componente e mostrado\n    componentDidMount(){\n        this.loadProducts()\n    }\n\n    prevPage = () => {\n        \n        const { page } = this.state\n\n        if(page === 1) return\n\n        const pageNumber = page - 1\n\n        this.loadProducts(pageNumber)\n\n    }\n\n    nextPage = () => {\n        const { page, detailsInfo } = this.state\n\n        if(page === detailsInfo.pages) return //.pages eh o limite de paginas\n\n        const pageNumber = page + 1\n\n        this.loadProducts(pageNumber)\n\n    }\n\n    createProduct = async () => {\n\n        const response = await api.post('/products', {title: 'oi', description: 'oi', url: 'www'})\n\n    }\n\n    loadProducts = async (page = 1) => { \n        const response = await api.get(`/products?page=${page}`)\n\n        console.log(response.data)\n       \n        const { docs, ...detailsInfo} = response.data;\n\n       this.setState({ products: docs, detailsInfo, page })\n    }\n\n    render(){\n        const { details, detailInfo, page } = this.state\n       \n        return(\n            <div className='details-list'>\n                {details.map(detail =>(\n                    <article key={detail._id}>\n                        <strong>{detail.title}</strong>\n                        <p>{detail.description}</p>\n\n                        <Link to={`products/${details._id}`}>Acessar</Link>\n                    </article>\n                ))}\n                <div className='actions'>\n                    <button \n                    disabled={page === 1} \n                    onClick={this.prevPage}>\n                        Back</button>\n                    <button \n                    onClick={this.createDetails}>\n                        Add</button>\n                    <button \n                    disabled={page === detailsInfo.pages} \n                    onClick={this.nextPage}>\n                        Next</button>\n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}